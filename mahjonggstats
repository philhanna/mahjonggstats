#! /usr/bin/python3

from mj.history import History
from mj.history_list import HistoryList

history_list = HistoryList()

print("\nMahjongg history of {count} games from {start} to {end}".format(
    count=history_list.get_count(),
    start=history_list.earliest_date.strftime("%m/%d/%Y"),
    end=history_list.latest_date.strftime("%m/%d/%Y")
))

level_names = [key for key in history_list.levels.keys()]
level_names.sort(key=lambda name: history_list.get_record_list(name).get_count(), reverse=True)

for level in level_names:
    record_list = history_list.get_record_list(level)
    print("\n{count} games at level '{level}'".
        format(
        count=record_list.get_count(),
        level=level
    )
    )
    ft = History.format_time
    print("    mean     = {}".format(ft(record_list.get_mean())))
    print("    stdev    = {}".format(ft(record_list.get_standard_deviation())))
    lo, hi = record_list.get_95_confidence()
    print("    95% conf = {} to {}".format(ft(lo), ft(hi)))
    print("    top five scores:")
    for history in record_list.get_records()[:5]:
        print("        {}".format(history))
print()
git